{
    "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  
    "data": {
      "url": "https://raw.githubusercontent.com/klyi/InfoViz_final_project/main/movies_data.csv",
      "format": {"type": "csv"}
    },

    "title": {
        "text": "Movie Explorer",
        "anchor": "middle",
        "fontSize":20,
        "fontWeight":"bolder"
    },
  
    "vconcat": [{

    "repeat": {
      "column": [
        "worldwide_gross",
        "domestic_gross"
      ]
   
    },
  
    "config": {
    "legend": {
      "orient": "right"
    },
    "axis": {"titleFontSize": 12, "gridOpacity": 0.2}
    },
  
    "spec":{
    "mark": {
        "type": "circle", "opacity": 0.6
    },
    "params": [{
            "name": "brush",
            "select": {"type": "interval", "clear": "dblclick"}
            },
            {
                "name":"legend_select",
                "select": {"type":"point", "fields":["genre"]},
                "bind":"legend"
            },
            {
              "name":"legend_select2",
              "select": {"type":"point", "fields":["mpaa_rating"]},
              "bind":"legend"
            }],
  
            "transform": [
                {
                    "filter": {
                    "and": [
                        {"selection": "legend_select2"}
                        ]
                    }
                },
                {"filter": "datum.worldwide_gross < 1000000000"},
                {"filter": "datum.domestic_gross < 1000000000"},
                {"filter": {"and": [{"selection": "strip_brush"}]}}
            ],
  
      
    "height": 500,
    "width": 500,
    "encoding": {
      
        "x": {
            "field": "production_budget",
            "type": "quantitative",
            "axis": {"title": "Log-Scaled Production Budget ($)"},
            "scale": {"domain":[220000,200000000], "type": "log"}
            
  
        },
        "y": {
            "field": {"repeat": "column"},
            "type": "quantitative",
            
            
            "scale": {"domain":[0,1000000000]}
            
        },
        "color": {
            "condition": {
                "param": "brush",
                "field": "genre",
                "type": "nominal",
                "title": "Genre",
               
              "scale":{"domain":["Action", "Adventure", "Comedy", "Drama", "Horror"],
             "range":["#D55E00", "#CC79A7", "#0072B2", "#F0E442", "#009E73"]}
            
            },
           
            
            "value": "grey"
    
        },
        "tooltip": {"field": "movie", "type": "nominal"},
        "opacity":{
                "condition": {"param":"legend_select", "value":0.75 },
                "value": 0.1
        },
  
        "size": {
            "field": "mpaa_rating",
            "type": "nominal",
            "legend": {"orient": "right", "offset": 10},
            "scale": {
                "range": [85, 15],
                "domain": ["G", "PG", "PG-13", "R"]
                
            } 
        }
   
        
    }
    }
    },
    {
        "width": 1000,
        "height": 50,
        "transform": [
            {"filter": {"param": "brush"}},
            {"filter": {"param": "legend_select"}},
            {"filter": {"param": "legend_select2"}}
        ],
        "params": [{
            "name":"strip_brush",
            "select":{"type": "interval"}
        }],
        "mark": "tick",
        "encoding": {
            "x": {
                "field": "release_date",
                "type": "temporal",
                "title":"Release Date",
                "sort": {"field": "year", "order": "ascending"},
                "axis":{
                    "gridOpacity":0.4,
                    "labelAngle": 0                    
                }
            },
            "color": {
                "condition":{"param": "strip_brush",
                    "field": "genre",
                    "type": "nominal"
                },
                "value":"grey"
            }
        }


    }]
  
  
  }